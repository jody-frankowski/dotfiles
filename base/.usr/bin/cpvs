#!/bin/zsh

set -euo pipefail

if [[ $# -lt 2 || $1 == -h || $1 == --help ]]; then
    echo "Usage: $(basename $0) [RSYNC_OPTIONS] FILE|DIR... DESTINATION" >&2
    echo 'Copies files and directories to a root-owned destination.' >&2
    exit 1
fi

exec cpv --rsync-path="sudo rsync" "$@"
