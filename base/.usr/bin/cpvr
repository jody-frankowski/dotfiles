#!/bin/zsh

set -euo pipefail

if [[ $# -lt 2 || $1 == -h || $1 == --help ]]; then
    echo "Usage: $(basename $0) [RSYNC_OPTIONS] FILE|DIR... DESTINATION" >&2
    echo 'Copies files and directories to a slow destination that may require resuming.' >&2
    echo 'Files will be written in-place and will be compared based only on their size.' >&2
    exit 1
fi

exec cpv --inplace --size-only --stats "$@"
